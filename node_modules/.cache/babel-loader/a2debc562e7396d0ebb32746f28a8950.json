{"ast":null,"code":"!function (e) {\n  \"function\" == typeof define && define.amd ? define(e) : e();\n}(function () {\n  \"use strict\";\n\n  var e, t;\n  e = window, t = function t(e) {\n    var _c = function c() {\n      return (_c = Object.assign || function (e) {\n        for (var t, n = 1, i = arguments.length; n < i; n++) {\n          for (var o in t = arguments[n]) {\n            Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);\n          }\n        }\n\n        return e;\n      }).apply(this, arguments);\n    };\n\n    function f(n, i) {\n      var o,\n          r,\n          a,\n          e,\n          s = {\n        label: 0,\n        sent: function sent() {\n          if (1 & a[0]) throw a[1];\n          return a[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return e = {\n        next: t(0),\n        throw: t(1),\n        return: t(2)\n      }, \"function\" == typeof Symbol && (e[Symbol.iterator] = function () {\n        return this;\n      }), e;\n\n      function t(t) {\n        return function (e) {\n          return function (t) {\n            if (o) throw new TypeError(\"Generator is already executing.\");\n\n            for (; s;) {\n              try {\n                if (o = 1, r && (a = 2 & t[0] ? r.return : t[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, t[1])).done) return a;\n\n                switch (r = 0, a && (t = [2 & t[0], a.value]), t[0]) {\n                  case 0:\n                  case 1:\n                    a = t;\n                    break;\n\n                  case 4:\n                    return s.label++, {\n                      value: t[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    s.label++, r = t[1], t = [0];\n                    continue;\n\n                  case 7:\n                    t = s.ops.pop(), s.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(a = 0 < (a = s.trys).length && a[a.length - 1]) && (6 === t[0] || 2 === t[0])) {\n                      s = 0;\n                      continue;\n                    }\n\n                    if (3 === t[0] && (!a || t[1] > a[0] && t[1] < a[3])) {\n                      s.label = t[1];\n                      break;\n                    }\n\n                    if (6 === t[0] && s.label < a[1]) {\n                      s.label = a[1], a = t;\n                      break;\n                    }\n\n                    if (a && s.label < a[2]) {\n                      s.label = a[2], s.ops.push(t);\n                      break;\n                    }\n\n                    a[2] && s.ops.pop(), s.trys.pop();\n                    continue;\n                }\n\n                t = i.call(n, s);\n              } catch (e) {\n                t = [6, e], r = 0;\n              } finally {\n                o = a = 0;\n              }\n            }\n\n            if (5 & t[0]) throw t[1];\n            return {\n              value: t[0] ? t[1] : void 0,\n              done: !0\n            };\n          }([t, e]);\n        };\n      }\n    }\n\n    function t(s, l) {\n      return function (e, t) {\n        var n,\n            i,\n            o,\n            r = t.name,\n            a = t.action;\n        return u.global += l, u.models[r] += l, u.effects[r][a] += l, _c(_c({}, e), {\n          global: s(u.global),\n          models: _c(_c({}, e.models), (n = {}, n[r] = s(u.models[r]), n)),\n          effects: _c(_c({}, e.effects), (i = {}, i[r] = _c(_c({}, e.effects[r]), (o = {}, o[a] = s(u.effects[r][a]), o)), i))\n        });\n      };\n    }\n\n    var u = {\n      global: 0,\n      models: {},\n      effects: {}\n    };\n    e.default = function (i) {\n      void 0 === i && (i = {}), function (e) {\n        if (e.name && \"string\" != typeof e.name) throw new Error(\"loading plugin config name must be a string\");\n        if (e.asNumber && \"boolean\" != typeof e.asNumber) throw new Error(\"loading plugin config asNumber must be a boolean\");\n        if (e.whitelist && !Array.isArray(e.whitelist)) throw new Error(\"loading plugin config whitelist must be an array of strings\");\n        if (e.blacklist && !Array.isArray(e.blacklist)) throw new Error(\"loading plugin config blacklist must be an array of strings\");\n        if (e.whitelist && e.blacklist) throw new Error(\"loading plugin config cannot have both a whitelist & a blacklist\");\n      }(i);\n      var o = i.name || \"loading\",\n          s = !0 === i.asNumber ? function (e) {\n        return e;\n      } : function (e) {\n        return 0 < e;\n      },\n          l = {\n        name: o,\n        reducers: {\n          hide: t(s, -1),\n          show: t(s, 1)\n        },\n        state: _c({}, u)\n      };\n      return u.global = 0, l.state.global = s(u.global), {\n        config: {\n          models: {\n            loading: l\n          }\n        },\n        onModel: function onModel(e) {\n          var n = this,\n              a = e.name;\n\n          if (a !== o) {\n            u.models[a] = 0, l.state.models[a] = s(u.models[a]), l.state.effects[a] = {};\n            var t = this.dispatch[a];\n            Object.keys(t).forEach(function (o) {\n              if (!0 === n.dispatch[a][o].isEffect) {\n                u.effects[a][o] = 0, l.state.effects[a][o] = s(u.effects[a][o]);\n                var e = a + \"/\" + o;\n\n                if ((!i.whitelist || i.whitelist.includes(e)) && (!i.blacklist || !i.blacklist.includes(e))) {\n                  var r = n.dispatch[a][o],\n                      t = function t() {\n                    for (var i = [], e = 0; e < arguments.length; e++) {\n                      i[e] = arguments[e];\n                    }\n\n                    return function (r, a, s, l) {\n                      return new (s = s || Promise)(function (e, t) {\n                        function n(e) {\n                          try {\n                            o(l.next(e));\n                          } catch (e) {\n                            t(e);\n                          }\n                        }\n\n                        function i(e) {\n                          try {\n                            o(l.throw(e));\n                          } catch (e) {\n                            t(e);\n                          }\n                        }\n\n                        function o(t) {\n                          t.done ? e(t.value) : new s(function (e) {\n                            e(t.value);\n                          }).then(n, i);\n                        }\n\n                        o((l = l.apply(r, a || [])).next());\n                      });\n                    }(n, void 0, void 0, function () {\n                      var t, n;\n                      return f(this, function (e) {\n                        switch (e.label) {\n                          case 0:\n                            return e.trys.push([0, 2,, 3]), this.dispatch.loading.show({\n                              name: a,\n                              action: o\n                            }), [4, r.apply(void 0, i)];\n\n                          case 1:\n                            return t = e.sent(), this.dispatch.loading.hide({\n                              name: a,\n                              action: o\n                            }), [2, t];\n\n                          case 2:\n                            throw n = e.sent(), this.dispatch.loading.hide({\n                              name: a,\n                              action: o\n                            }), n;\n\n                          case 3:\n                            return [2];\n                        }\n                      });\n                    });\n                  };\n\n                  t.isEffect = !0, n.dispatch[a][o] = t;\n                }\n              }\n            });\n          }\n        }\n      };\n    }, Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, \"object\" == typeof exports && \"undefined\" != typeof module ? t(exports) : \"function\" == typeof define && define.amd ? define([\"exports\"], t) : t((e = e || self).RematchLoading = {});\n});","map":null,"metadata":{},"sourceType":"script"}